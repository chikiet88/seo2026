<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cáº¥u hÃ¬nh Google Analytics API - TazaGroup</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .input-group { margin-bottom: 1rem; }
    .input-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; }
    .input-group input { width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; }
    .input-group input:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
    .code-block { background: #1f2937; color: #10b981; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; font-family: monospace; }
    .step-number { background: #3b82f6; color: white; width: 2rem; height: 2rem; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-right: 0.5rem; }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <div class="max-w-4xl mx-auto p-6">
    <!-- Header -->
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-lg mb-6 shadow-lg">
      <h1 class="text-2xl font-bold">âš™ï¸ Cáº¥u HÃ¬nh Google Analytics API</h1>
      <p class="mt-2 opacity-90">Thiáº¿t láº­p káº¿t ná»‘i GA4 cho 5 website TazaGroup</p>
    </div>

    <!-- HÆ°á»›ng dáº«n -->
    <div class="bg-white rounded-lg shadow p-6 mb-6">
      <h2 class="text-xl font-bold mb-4">ğŸ“‹ HÆ°á»›ng Dáº«n Thiáº¿t Láº­p</h2>
      
      <div class="space-y-4">
        <div class="border-l-4 border-blue-500 pl-4">
          <h3 class="font-semibold flex items-center">
            <span class="step-number">1</span>
            Táº¡o Google Cloud Project
          </h3>
          <p class="text-gray-600 mt-1">Truy cáº­p <a href="https://console.cloud.google.com" target="_blank" class="text-blue-600 hover:underline">Google Cloud Console</a> vÃ  táº¡o project má»›i.</p>
        </div>

        <div class="border-l-4 border-blue-500 pl-4">
          <h3 class="font-semibold flex items-center">
            <span class="step-number">2</span>
            Báº­t Google Analytics Data API
          </h3>
          <p class="text-gray-600 mt-1">VÃ o APIs & Services â†’ Enable APIs â†’ TÃ¬m "Google Analytics Data API" â†’ Enable</p>
        </div>

        <div class="border-l-4 border-blue-500 pl-4">
          <h3 class="font-semibold flex items-center">
            <span class="step-number">3</span>
            Táº¡o OAuth 2.0 Credentials
          </h3>
          <p class="text-gray-600 mt-1">APIs & Services â†’ Credentials â†’ Create Credentials â†’ OAuth client ID</p>
          <p class="text-gray-600">Chá»n "Web application" vÃ  thÃªm origin cá»§a website.</p>
        </div>

        <div class="border-l-4 border-blue-500 pl-4">
          <h3 class="font-semibold flex items-center">
            <span class="step-number">4</span>
            Láº¥y GA4 Property ID
          </h3>
          <p class="text-gray-600 mt-1">VÃ o <a href="https://analytics.google.com" target="_blank" class="text-blue-600 hover:underline">Google Analytics</a> â†’ Admin â†’ Property Settings â†’ Copy Property ID</p>
          <p class="text-sm text-orange-600 mt-1">âš ï¸ Property ID cÃ³ dáº¡ng sá»‘, vÃ­ dá»¥: 123456789</p>
        </div>
      </div>
    </div>

    <!-- Form cáº¥u hÃ¬nh -->
    <div class="bg-white rounded-lg shadow p-6 mb-6">
      <h2 class="text-xl font-bold mb-4">ğŸ”‘ Nháº­p ThÃ´ng Tin Cáº¥u HÃ¬nh</h2>
      
      <form id="configForm">
        <!-- OAuth Client ID -->
        <div class="input-group">
          <label>OAuth Client ID</label>
          <input type="text" id="clientId" placeholder="xxxx.apps.googleusercontent.com">
          <p class="text-sm text-gray-500 mt-1">Tá»« Google Cloud Console â†’ Credentials</p>
        </div>

        <hr class="my-6">
        <h3 class="font-bold mb-4">GA4 Property IDs cho tá»«ng website:</h3>

        <!-- Property IDs -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="input-group">
            <label class="text-red-600">ğŸ¥ TazaSkinClinic.com</label>
            <input type="text" id="prop_clinic" placeholder="Property ID (VD: 123456789)">
          </div>

          <div class="input-group">
            <label class="text-blue-700">ğŸ“ Timona.edu.vn</label>
            <input type="text" id="prop_timona" placeholder="Property ID (VD: 123456789)">
          </div>

          <div class="input-group">
            <label class="text-green-600">ğŸ’Š Hderma.vn</label>
            <input type="text" id="prop_hderma" placeholder="Property ID (VD: 123456789)">
          </div>

          <div class="input-group">
            <label class="text-purple-600">ğŸ§¬ Elasome.com</label>
            <input type="text" id="prop_elasome" placeholder="Property ID (VD: 123456789)">
          </div>

          <div class="input-group">
            <label class="text-gray-600">ğŸ¢ TazaGroup.vn</label>
            <input type="text" id="prop_group" placeholder="Property ID (VD: 123456789)">
          </div>
        </div>

        <div class="flex gap-4 mt-6">
          <button type="button" onclick="generateConfig()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold">
            ğŸ“ Táº¡o Cáº¥u HÃ¬nh
          </button>
          <button type="button" onclick="testConnection()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold">
            ğŸ”— Kiá»ƒm Tra Káº¿t Ná»‘i
          </button>
          <button type="button" onclick="saveConfig()" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold">
            ğŸ’¾ LÆ°u Cáº¥u HÃ¬nh
          </button>
        </div>
      </form>
    </div>

    <!-- Generated Config -->
    <div class="bg-white rounded-lg shadow p-6 mb-6" id="configOutput" style="display: none;">
      <h2 class="text-xl font-bold mb-4">ğŸ“„ Cáº¥u HÃ¬nh ÄÃ£ Táº¡o</h2>
      <div class="code-block" id="configCode"></div>
      <button onclick="copyConfig()" class="mt-4 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg">
        ğŸ“‹ Copy Code
      </button>
    </div>

    <!-- Status -->
    <div class="bg-white rounded-lg shadow p-6" id="statusPanel">
      <h2 class="text-xl font-bold mb-4">ğŸ“Š Tráº¡ng ThÃ¡i Káº¿t Ná»‘i</h2>
      <div id="statusContent">
        <p class="text-gray-500">ChÆ°a káº¿t ná»‘i. Nháº­p thÃ´ng tin vÃ  nháº¥n "Kiá»ƒm Tra Káº¿t Ná»‘i".</p>
      </div>
    </div>

    <!-- Back link -->
    <div class="mt-6 text-center">
      <a href="index.html" class="text-blue-600 hover:underline">â† Quay láº¡i Dashboard</a>
    </div>
  </div>

  <script>
    // Load saved config from localStorage
    window.onload = function() {
      const saved = localStorage.getItem('ga_config');
      if (saved) {
        try {
          const config = JSON.parse(saved);
          document.getElementById('clientId').value = config.clientId || '';
          document.getElementById('prop_clinic').value = config.properties?.clinic || '';
          document.getElementById('prop_timona').value = config.properties?.timona || '';
          document.getElementById('prop_hderma').value = config.properties?.hderma || '';
          document.getElementById('prop_elasome').value = config.properties?.elasome || '';
          document.getElementById('prop_group').value = config.properties?.group || '';
        } catch (e) {
          console.error('Error loading config:', e);
        }
      }
    };

    function getFormData() {
      return {
        clientId: document.getElementById('clientId').value.trim(),
        properties: {
          clinic: document.getElementById('prop_clinic').value.trim(),
          timona: document.getElementById('prop_timona').value.trim(),
          hderma: document.getElementById('prop_hderma').value.trim(),
          elasome: document.getElementById('prop_elasome').value.trim(),
          group: document.getElementById('prop_group').value.trim()
        }
      };
    }

    function generateConfig() {
      const data = getFormData();
      
      const configCode = `// Cáº¥u hÃ¬nh Google Analytics API
// Tá»± Ä‘á»™ng táº¡o: ${new Date().toLocaleString('vi-VN')}

const GA_CONFIG = {
  clinic: {
    propertyId: '${data.properties.clinic}',
    name: 'TazaSkinClinic.com',
    color: '#dc2626'
  },
  timona: {
    propertyId: '${data.properties.timona}',
    name: 'Timona.edu.vn',
    color: '#1e40af'
  },
  hderma: {
    propertyId: '${data.properties.hderma}',
    name: 'Hderma.vn',
    color: '#059669'
  },
  elasome: {
    propertyId: '${data.properties.elasome}',
    name: 'Elasome.com',
    color: '#7c3aed'
  },
  group: {
    propertyId: '${data.properties.group}',
    name: 'TazaGroup.vn',
    color: '#64748b'
  }
};

const OAUTH_CLIENT_ID = '${data.clientId}';

// Export
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { GA_CONFIG, OAUTH_CLIENT_ID };
}`;

      document.getElementById('configCode').textContent = configCode;
      document.getElementById('configOutput').style.display = 'block';
    }

    function copyConfig() {
      const code = document.getElementById('configCode').textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert('âœ… ÄÃ£ copy cáº¥u hÃ¬nh!');
      });
    }

    function saveConfig() {
      const data = getFormData();
      localStorage.setItem('ga_config', JSON.stringify(data));
      alert('âœ… ÄÃ£ lÆ°u cáº¥u hÃ¬nh vÃ o localStorage!');
    }

    async function testConnection() {
      const statusContent = document.getElementById('statusContent');
      const data = getFormData();

      if (!data.clientId) {
        statusContent.innerHTML = '<p class="text-red-600">âŒ Vui lÃ²ng nháº­p OAuth Client ID</p>';
        return;
      }

      statusContent.innerHTML = '<p class="text-blue-600">ğŸ”„ Äang kiá»ƒm tra káº¿t ná»‘i...</p>';

      // Check if properties are configured
      const missingProps = Object.entries(data.properties)
        .filter(([key, value]) => !value)
        .map(([key]) => key);

      let statusHtml = '<div class="space-y-2">';
      
      // Show property status
      Object.entries(data.properties).forEach(([key, value]) => {
        const siteName = {
          clinic: 'TazaSkinClinic.com',
          timona: 'Timona.edu.vn',
          hderma: 'Hderma.vn',
          elasome: 'Elasome.com',
          group: 'TazaGroup.vn'
        }[key];

        if (value) {
          statusHtml += `<p class="text-green-600">âœ… ${siteName}: Property ID ${value}</p>`;
        } else {
          statusHtml += `<p class="text-yellow-600">âš ï¸ ${siteName}: ChÆ°a cáº¥u hÃ¬nh</p>`;
        }
      });

      if (missingProps.length === 0) {
        statusHtml += '<p class="text-green-600 font-bold mt-4">âœ… Táº¥t cáº£ website Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh!</p>';
        statusHtml += '<p class="text-gray-600 mt-2">Nháº¥n "LÆ°u Cáº¥u HÃ¬nh" vÃ  sao chÃ©p code vÃ o file google-analytics-api.js</p>';
      } else {
        statusHtml += `<p class="text-yellow-600 font-bold mt-4">âš ï¸ CÃ²n ${missingProps.length} website chÆ°a cáº¥u hÃ¬nh</p>`;
      }

      statusHtml += '</div>';
      statusContent.innerHTML = statusHtml;
    }
  </script>
</body>
</html>
